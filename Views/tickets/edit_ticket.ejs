<%- include ('../partials/header'); %>
<title>Edit Ticket</title>
<%- include ('../partials/navbar'); %>
<link rel="stylesheet" type="text/css" href="/styles/login.css">
	
	<div>
            <div class="container">
                <h2 class="py-2 page_title">Edit Ticket:</h2>
                <form action="/tickets/<%= ticket._id %>?_method=PUT" class="form_content" method="POST">
					<div class="form-group">
                        <input autocomplete="off" autofocus class="form-control" name="ticket[ticket_name]" placeholder="Ticket Name" value="<%= ticket.ticket_name %>" type="text">
                    </div> 
					<div class="form-group">
						<p>Created By User:</p>
						<select class="form-control dropdown_search" name="ticket[created_by]">
							<% if (ticket.created_by) { %>
								<option value="<%= ticket["created_by"]._id %>"><%= ticket["created_by"].username %></option>
							<% } else { %>
								<option value="[deleted]">[deleted]</option>	
							<% } %>							
							<% users.forEach(function(user){ %>
									  <option value="<%= user._id %>"><%= user.username %></option>
							<% }) %>
						</select>
                    </div>
					<div class="form-group">
						<p>Assign to User:</p>
						<select class="form-control dropdown_search" name="ticket[assigned_user]">
							<% if (ticket.assigned_user) { %>
							<option value="<%= ticket["assigned_user"]._id %>"><%= ticket["assigned_user"].username %></option>
							<% } else { %>
								<option value="[deleted]">[deleted]</option>	
							<% } %>	
							<% users.forEach(function(user){ %>
							  <option value="<%= user._id %>"><%= user.username %></option>
							<% }) %>
						</select>
                    </div>
					<p>Due Date:</p>
						<div class="form-group">
							<input type="date" class="form-control" name="ticket[due_date]" value="<%= due_date %>" required>
						</div>
					
                    <div class="form-group">
						<p>Ticket Description:</p>
                        <textarea name="ticket[description]"><%= ticket.description %></textarea>
                    </div> 					

                    <button class="button zoom" type="submit">Submit</button>
                </form>
            </div>
        </div>


<%- include ('../partials/footer'); %>